System for metering in an on-demand utility environment . A method for metering on-demand service (ODS) resource consumption by a user comprising a web services interface, a processing engine, and configuration data. A data gathering agent in the ODS stores the usage data in records, combines the records into packets, and transmits the packets to the web services interface. The web services interface passes the packets onto the processing engine, which stores the records in the packet into a database. The generalized format of the record is critical because it allows the metrics to be stored in the record table with the usage data. When a record contains an instruction to close a UOW, the processing engine applies the configuration data comprising composition rules and record selection rules to the database. The record selection rules select the desired records from the database. The composition rules aggregate, normalize, and compose the selected records to produce a metric.
